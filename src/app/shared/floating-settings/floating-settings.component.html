<!-- WRAPPER (important for click outside) -->
<div
  class="settings-wrapper fixed z-50 bottom-4 left-1/2 -translate-x-1/2 md:left-auto md:right-6 md:translate-x-0"
>
  <!-- SETTINGS MENU -->
  <div
    *ngIf="isOpen && !hiddenOnScroll"
    class="absolute bottom-20 left-1/2 -translate-x-1/2 md:left-auto md:right-0 md:translate-x-0 w-64 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl p-4 space-y-4 md:animate-scale-in"
  >
    <!-- THEME -->
    <div class="flex items-center justify-between">
      <span class="text-sm font-medium text-gray-700 dark:text-gray-200">
        {{ "Dark Mode" | translate }}
      </span>

      <button
        (click)="toggleTheme()"
        class="relative w-10 h-5 rounded-full bg-gray-300 dark:bg-sky-500 transition-colors"
      >
        <!-- ICON LEFT (LIGHT) -->
        <img
          src="assets/images/logo/sun_774669.png"
          class="absolute left-1 top-1/2 -translate-y-1/2 w-3 h-3 brightness-110 saturate-150"
          alt="light"
        />

        <!-- ICON RIGHT (DARK) -->
        <img
          src="assets/images/logo/moon_11215508.png"
          class="absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 opacity-80"
          alt="dark"
        />

        <!-- THUMB -->
        <span
          class="absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform"
          [class.translate-x-5]="theme === 'dark'"
        ></span>
      </button>
    </div>

    <!-- LANGUAGE -->
    <div class="flex items-center justify-between">
      <span class="text-sm font-medium text-gray-700 dark:text-gray-200">
        {{ "Language" | translate }}
      </span>

      <button
        (click)="toggleLanguage()"
        class="relative w-10 h-5 rounded-full bg-gray-300 dark:bg-sky-500 transition-colors"
      >
        <!-- EN -->
        <span
          class="absolute left-1 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600"
        >
          EN
        </span>

        <!-- ID -->
        <span
          class="absolute right-1 top-1/2 -translate-y-1/2 text-[9px] font-bold text-gray-600"
        >
          ID
        </span>

        <!-- THUMB -->
        <span
          class="absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform"
          [class.translate-x-5]="language === 'id'"
        ></span>
      </button>
    </div>

    <!-- MOBILE PREVIEW (DESKTOP ONLY) -->
    <div class="hidden md:flex items-center justify-between">
      <span class="text-sm font-medium text-gray-700 dark:text-gray-200">
        {{ "Mobile Preview" | translate }}
      </span>

      <button
        (click)="viewModeService.toggleMobilePreview()"
        class="relative w-10 h-5 rounded-full bg-gray-300 dark:bg-sky-500 transition-colors"
      >
        <!-- ICON -->
        <span
          class="material-icons absolute left-1 top-1/2 -translate-y-1/2 text-[12px] text-gray-600"
        >
          phone_iphone
        </span>

        <!-- THUMB -->
        <span
          class="absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform"
          [class.translate-x-5]="viewModeService.isMobilePreview()"
        ></span>
      </button>
    </div>
  </div>

  <div
    [class.opacity-0]="hiddenOnScroll"
    class="transition-opacity duration-300"
  >
    <!-- FLOATING BUTTON -->
    <button
      (click)="toggleMenu()"
      class="group relative w-11 h-11 md:w-14 md:h-14 rounded-full bg-gradient-to-br from-sky-500 via-blue-500 to-indigo-500 shadow-lg hover:shadow-xl flex items-center justify-center transition-transform hover:scale-105"
    >
      <span
        class="material-icons text-white text-xl md:text-2xl transition-transform"
        [class.rotate-90]="isOpen"
      >
        settings
      </span>

      <!-- TOOLTIP (desktop only) -->
      <span
        class="hidden md:block pointer-events-none absolute bottom-full mb-3 opacity-0 translate-y-1 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-200 whitespace-nowrap text-xs font-medium text-white bg-gray-900/90 px-3 py-1.5 rounded-md"
      >
        {{ "Preferences" | translate }}
      </span>
    </button>
  </div>
</div>
